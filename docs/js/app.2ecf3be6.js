(function(){"use strict";var e={8958:function(e,t,n){var o=n(3751),i=n(641);function r(e,t,n,o,r,a){const s=(0,i.g2)("v-toolbar-title"),c=(0,i.g2)("v-spacer"),l=(0,i.g2)("router-link"),d=(0,i.g2)("v-btn"),u=(0,i.g2)("v-app-bar"),f=(0,i.g2)("router-view"),m=(0,i.g2)("v-container"),h=(0,i.g2)("v-main"),p=(0,i.g2)("v-footer"),g=(0,i.g2)("v-app");return(0,i.uX)(),(0,i.Wv)(g,null,{default:(0,i.k6)((()=>[(0,i.bF)(u,{app:"",color:"indigo",dark:""},{default:(0,i.k6)((()=>[(0,i.bF)(s,null,{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.eW)("3D Battle")]))),_:1}),(0,i.bF)(c),(0,i.bF)(d,{text:""},{default:(0,i.k6)((()=>[(0,i.bF)(l,{to:"/",class:"nav-link"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.eW)("Home")]))),_:1})])),_:1}),(0,i.bF)(d,{text:""},{default:(0,i.k6)((()=>[(0,i.bF)(l,{to:"/battle",class:"nav-link"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("Battle")]))),_:1})])),_:1}),(0,i.bF)(d,{text:""},{default:(0,i.k6)((()=>[(0,i.bF)(l,{to:"/ranking",class:"nav-link"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.eW)("Ranking")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(h,null,{default:(0,i.k6)((()=>[(0,i.bF)(m,null,{default:(0,i.k6)((()=>[(0,i.bF)(f)])),_:1})])),_:1}),(0,i.bF)(p,{class:"bg-indigo lighten-1 text-center d-flex flex-column pa-4 height-10px"})])),_:1})}var a={name:"App"},s=n(6262);const c=(0,s.A)(a,[["render",r]]);var l=c,d=n(6166);function u(e,t,n,o,r,a){return(0,i.uX)(),(0,i.CE)("h1",null,"Home")}var f={name:"HomePage"};const m=(0,s.A)(f,[["render",u]]);var h=m;function p(e,t,n,o,r,a){const s=(0,i.g2)("v-app");return(0,i.uX)(),(0,i.Wv)(s,null,{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.Lk)("div",{class:"three-container"},[(0,i.Lk)("canvas",{id:"three-canvas"}),(0,i.Lk)("button",{id:"up"},"↑"),(0,i.Lk)("button",{id:"down"},"↓"),(0,i.Lk)("button",{id:"left"},"←"),(0,i.Lk)("button",{id:"right"},"→")],-1)]))),_:1})}n(4114);var g=n(9437),v={name:"BattleScene",data(){return{ws:null,game:null}},mounted(){this.createWebSocket(),this.initThree()},methods:{createWebSocket(){this.ws=new WebSocket("ws://localhost:8000/ws"),this.ws.onopen=()=>{console.log("WebSocket connected")},this.ws.onclose=()=>{console.log("WebSocket closed")},this.ws.onmessage=e=>{this.game=JSON.parse(e.data),console.log(this.game)}},initThree(){const e=new g.Z58;this.game={ball:["","","","","","","","","","","","","","","","","",""],winner:"",turn:0,player:"B"};let t=[];e.add(new g.fTw(1e3,1e3));const n=new g.ubm(75,window.innerWidth/window.innerHeight,.1,1e3);n.position.z=10.8,n.position.y=10,n.position.x=3.2;const o=new g.JeP({canvas:document.getElementById("three-canvas")});o.setSize(window.innerWidth,window.innerHeight);const i=e=>{for(let t=0;t<16;t++)for(let n=0;n<e.ball[t].length;n++)c(t,n,"");for(let t=0;t<16;t++)if(""!==e.ball[t])for(let n=0;n<e.ball[t].length;n++)c(t,n,e.ball[t][n])},r=()=>{const n=new g.iNn(10,3,10),o=new g.V9B({color:268435455}),i=new g.eaF(n,o);e.add(i),i.position.x=0,i.position.z=0;const r=new g.Ho_(.5,.3,6),a=2,s=-3,c=-3,l=3;for(let d=0;d<16;d++){let n=new g.V9B({color:14596231}),o=new g.eaF(r,n);o.position.x=s+a*Math.floor(d/4),o.position.y=l,o.position.z=c+a*(d%4),t.push(o),e.add(o)}};r();const a=function(){requestAnimationFrame(a),o.render(e,n)},s=function(){let e=0;document.getElementById("up").addEventListener("mousedown",(function(){e=1})),document.getElementById("down").addEventListener("mousedown",(function(){e=2})),document.getElementById("left").addEventListener("mousedown",(function(){e=3})),document.getElementById("right").addEventListener("mousedown",(function(){e=4})),document.getElementById("up").addEventListener("mouseup",(function(){e=0})),document.getElementById("down").addEventListener("mouseup",(function(){e=0})),document.getElementById("left").addEventListener("mouseup",(function(){e=0})),document.getElementById("right").addEventListener("mouseup",(function(){e=0})),document.getElementById("up").addEventListener("touchstart",(function(){e=1})),document.getElementById("down").addEventListener("touchstart",(function(){e=2})),document.getElementById("left").addEventListener("touchstart",(function(){e=3})),document.getElementById("right").addEventListener("touchstart",(function(){e=4})),document.getElementById("up").addEventListener("touchend",(function(){e=0})),document.getElementById("down").addEventListener("touchend",(function(){e=0})),document.getElementById("left").addEventListener("touchend",(function(){e=0})),document.getElementById("right").addEventListener("touchend",(function(){e=0}));const t=.03,o=15;let i=Math.PI/3,r=Math.PI/3;const a=function(){switch(e){case 1:if(i>=4*Math.PI/10)break;i+=t;break;case 2:if(i<=-4*Math.PI/10)break;i-=t;break;case 3:r+=t;break;case 4:r-=t;break}n.position.x=o*Math.cos(i)*Math.cos(r),n.position.z=o*Math.cos(i)*Math.sin(r),n.position.y=o*Math.sin(i),n.lookAt(new g.Pq0(0,0,0))};setInterval(a,1e3/60)};s();const c=(n,o,i)=>{const r=.7,a=new g.Gu$(r,32,32);if("W"===i){const i=new g.V9B({color:16777215}),r=new g.eaF(a,i);return r.position.x=t[n].position.x,r.position.y=t[n].position.y-.3+o,r.position.z=t[n].position.z,void e.add(r)}if("B"===i){const i=new g.V9B({color:0}),r=new g.eaF(a,i);return r.position.x=t[n].position.x,r.position.y=t[n].position.y-.3+o,r.position.z=t[n].position.z,void e.add(r)}return null};let l=null;const d=r=>{const a=new g.tBo,s=new g.I9Y,c=r.clientX,d=r.clientY,u=o.domElement.width,f=o.domElement.height;s.x=c/u*2-1,s.y=-d/f*2+1,a.setFromCamera(s,n);const m=a.intersectObjects(e.children);if(m.length>0){if(16777215===m[0].object.material.color.getHex())return;if(16711680===m[0].object.material.color.getHex()){for(let e=0;e<16;e++)if(t[e]===l){if(4===this.game.ball[e].length)return;this.game.ball[e]+=this.game.player,i(this.game);let t={action:"put",cylinder:e,color:this.game.player};this.ws.send(JSON.stringify(t))}return m[0].object.material.color.set(14596231),void(l=null)}if(14596231===m[0].object.material.color.getHex())return null!==l&&l.material.color.set(14596231),m[0].object.material.color.set(16711680),void(l=m[0].object)}};document.addEventListener("click",d,!1),document.addEventListener("touchstart",d,!1),document.addEventListener("keypress",(e=>{"a"===e.key&&this.ws.send(JSON.stringify({action:"end"}))})),a()}}};const b=(0,s.A)(v,[["render",p],["__scopeId","data-v-455a6a30"]]);var w=b;const y=[{path:"/",name:"Home",component:h},{path:"/battle",name:"Battle",component:w}],k=(0,d.aE)({history:(0,d.Bt)(),routes:y});var E=k,B=(n(5524),n(4825)),L=n(2938),x=n(3379),I=n(1050);const _=(0,B.$N)({components:L,directives:x,icons:{defaultSet:"mdi",aliases:I.z,sets:{mdi:I.r}}});(0,o.Ef)(l).use(E).use(_).mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,r){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],i=e[d][1],r=e[d][2];for(var s=!0,c=0;c<o.length;c++)(!1&r||a>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,i,r]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,r,a=o[0],s=o[1],c=o[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)var d=c(n)}for(t&&t(o);l<a.length;l++)r=a[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},o=self["webpackChunk_3d_battle"]=self["webpackChunk_3d_battle"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(8958)}));o=n.O(o)})();
//# sourceMappingURL=app.2ecf3be6.js.map